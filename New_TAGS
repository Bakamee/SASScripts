pipeline{

def tag = "${ref}"
def last = tag.tokenize('/')[-1]
    agent {label "sasmachine"}
    environment{
    tag = "${ref}"
    }
    stages{
        def tag = tag.
        stage(prepare){
            steps{
            sh "echo ${last}" 
            }
          
        }
        
        stage ("New Code Developed"){
            steps{
                echo "new dev code commited, needs to be productionised"
            }
        }
        stage("Checkout  to Prod"){
            steps {
             echo "checkout steps"
            }
        }
        
    }
}
